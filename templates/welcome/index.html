{% extends 'base.html' %}
{% block content %}

<!-- Home Content -->
<section class="home-content" role="region">

  <!-- Home Intro -->
  <div class="container">
    <div class="row">
      <div class="home-intro col-sm-6">
          <h1>{{ _('¿Cómo y en qué gasta el Gobierno de Aragón?') }}</h1>
          <p>{{ _('Te mostramos de un modo claro cómo se distribuye nuestro presupuesto. De dónde vienen los ingresos y a qué destinamos el gasto') }}.</p>
      </div>
      <div class="col-sm-6">
        <div class="expense-examples">
          <p class="title">{{ _('Algunos ejemplos') }}:</p>
          <ul>
            {% for programme in featured_programmes %}
            {# Items are initially hidden and shown randomly via Javascript, see below #}
            <li class="hidden">
              <a href="{% url 'budget_app.views.programmes_show' programme.uid(), programme.slug() %}">{{ programme.description }}</a>
              &rarr; <b>{{ formatter( breakdown.subtotals[programme.uid()].total_expense[latest_budget.year] / 100 ) }} €</b>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Sections -->
  <div class="options">
    <div class="container">

      <!-- Section Visión Global -->
      <div class="option-global">
        <div data-icon="B" aria-hidden="true" class="icon mega"></div>
        <h2>{{ _('Visión global') }}</h2>
        <p class="desc">{{ _('Para que tengas una idea general de los ingresos y gastos del Gobierno de Aragón') }}.</p>
        <p><a href="{{ url('budget_app.views.budgets') }}" class="btn btn-default btn-primary magenta icon-plus">{{ _('Visión global') }}</a></p>
      </div>

      <!-- Section Políticas -->
      <div class="option-policies">
        <div data-icon="P" aria-hidden="true" class="icon mega"></div>
        <h2>{{ _('Políticas concretas') }}</h2>
          <ul>
            <li><a href="{{ url('budget_app.views.policies') }}">{{ _('Gobierno de Aragón') }}</a></li>
            <li><a href="{{ url('budget_app.views.counties') }}">{{ _('Comarcas') }}</a></li>
            <li><a href="{{ url('budget_app.views.towns') }}">{{ _('Municipios') }}</a></li>
          </ul>
        <p><a href="{{ url('budget_app.views.policies') }}" class="btn btn-default btn-primary blue icon-plus">{{ _('Políticas') }}</a></p>
      </div>

      <!-- Section Pagos -->
      <div class="option-payments">
        <div data-icon="&#xe604;" aria-hidden="true" class="icon mega"></div>
        <h2>{{ _('Pagos e inversiones') }}</h2>
        <p class="desc">{{ _('Te mostramos en detalle todos las facturas y pagos efectuados por el Ayuntamiento') }}.</p>
        <p><a href="{{ url('budget_app.views.payments') }}" class="btn btn-default btn-primary green icon-plus">{{ _('Pagos e inversiones') }}</a></p>
      </div>

      <!-- Section Calculadora -->
      <div class="option-tax">
        <div data-icon="&#x63;" aria-hidden="true" class="icon mega"></div>
        <h2>{{ _('¿Y qué aporto yo?') }}</h2>
        <p class="desc">{{ _('Te contamos en qué se invierte el dinero que recaudamos de tus impuestos') }}.</p>
        <p><a href="{{ url('budget_app.views.tax_receipt') }}" class="btn btn-default btn-primary green icon-plus">{{ _('Lo que tú aportas') }}</a></p>
      </div>
    </div>
  </div>

</section>

<script>
$(function () {
  // Show three featured programmes, at random.
  // We used to do the selection on the server, but then the page would be cached, hence not random anymore.
  for (var i=1; i<=3; i++) {
    var hiddenProgrammes = $("div.expense-examples li.hidden"),
        chosenProgramme = Math.floor(Math.random()*hiddenProgrammes.length);
    $(hiddenProgrammes[chosenProgramme]).removeClass("hidden");
  }

  // Make hero boxes react to clicks
  $('.option-global').click(function(){window.location = '{{ url('budget_app.views.budgets') }}';});
  $('.option-policies').click(function(){window.location = '{{ url('budget_app.views.policies') }}';});
  $('.option-tax').click(function(){window.location = '{{ url('budget_app.views.tax_receipt') }}';});
});
</script>
{% endblock %} 
